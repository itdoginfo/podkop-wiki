---
title: 'Тонкости DNS'
weight: 6
toc: true
---

Podkop берёт на себя роль DNS-резолвера. Самая обычная схема:
> ПК - Dnsmasq 0.0.0.0:53 - Sing-box 127.0.0.42:53 - DNS-server

Таким образом, если вам нужно поменять DNS-сервер, это делается в настройках Podkop (**Settings**).

Поддерживаются три типа DNS:
- DoH (DNS over HTTPS)
- DoT (DNS over TLS)
- UDP (Без шифрования)

Читайте эту [статью](/docs/adguard/), если вам необходимо совместить работу с AdGuard.

## Проблемы с DoH/DoT

В последнее время много жалоб на нестабильную работу DoH/DoT. Пока причина не до конца ясна, но, скорее всего, это "устаревание серверов".

Если вы используете такие технологии, как VLESS или Shadowsocks, то Xray/Sing-box на сервере уже самостоятельно резолвит доменные имена ресурсов из списков и вам достаточно указать DNS-сервер в опции **DNS-сервер**, которая находится в настройках Podkop.

> [!WARNING]
> Периодически наблюдаются проблемы при использовании публичных UDP резолверов 8.8.8.8.

Рекомендуем для режима **Proxy** использовать обычный UDP-сервер вашего провайдера или публичные резолверы (8.8.8.8, 1.1.1.1 и т.д.) для ресурсов не из списков и нужд Podkop.

Если вы используете Wireguard, AWG, OpenConnect, OpenVPN и т.п., начиная с версии 0.7 реализован **Domain Resolver**. Вы можете выбрать, какой сервер использовать для резолвинга доменов из списков - запросы будут идти через ваш туннель. Эта настройка включается в **Sections**, когда в качестве **Connection Type** указан режим `VPN`.
Так вы избегаете проблем с DoH/DoT, при этом запросы к важным ресурсам остаются зашифрованными.

Всем, кто не готов разбираться с шифроваными DNS рекомендуется использовать **DNS-сервер** по UDP, при использовании [туннелей](/docs/tunnels/) и включенной опцией **Domain Resolver**.
